---

#- name: Add locale gen file
#  template:
#    src: locale.gen
#    dest: /etc/locale.gen
#
#- name: Update locales
#  shell: |
#    locale-gen
#    dpkg-reconfigure locales -f noninteractive

#- name: Wait for automatic system updates
#  become: true
#  shell: while sudo fuser /var/lib/dpkg/{{ item }} >/dev/null 2>&1; do sleep 1; done;
#  with_items:
#    - lock
#    - lock-frontend

- name: Update repositories cache
  apt:
    update_cache: yes
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

- name: Add repository
  yum_repository:
    name: epel
    description: EPEL YUM repo
    baseurl: https://download.fedoraproject.org/pub/epel/$releasever/$basearch/
  when: ansible_distribution == 'CentOS'

- name: Update cache
  yum:
    update_cache: yes
  when: ansible_distribution == 'CentOS'

- name: Install Common
  package:
    name: "{{ item }}"
  with_items:
    - vim
    - git
    - curl
    - wget
    - net-tools
    - xinetd
    - htop
    - psmisc
    - iputils-*
    - python

- name: Install Common Ubuntu Debian
  package:
    name: "{{ item }}"
  with_items:
    - apt-transport-https
    - ca-certificates
    - software-properties-common
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'
